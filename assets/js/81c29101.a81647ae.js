"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[494],{7039:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>x,contentTitle:()=>p,default:()=>v,frontMatter:()=>g,metadata:()=>o,toc:()=>f});const o=JSON.parse('{"id":"docs/controlling-state","title":"Controlling state","description":"From above Accordion","source":"@site/docs/docs/controlling-state.mdx","sourceDirName":"docs","slug":"/docs/controlling-state","permalink":"/react-accordion/docs/controlling-state","draft":false,"unlisted":false,"editUrl":"https://github.com/szhsin/react-accordion/tree/master/website/docs/docs/controlling-state.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"Customising header","permalink":"/react-accordion/docs/customising-header"},"next":{"title":"Item render prop","permalink":"/react-accordion/docs/item-render-prop"}}');var i=n(2540),r=n(8453),s=n(1432),a=n(2375);const l='import {\n  ControlledAccordion,\n  AccordionItem,\n  useAccordionProvider\n} from \'../accordion\';\n\nexport default function Example() {\n  // highlight-start\n  const providerValue = useAccordionProvider({\n    allowMultiple: true,\n    transition: true,\n    transitionTimeout: 250\n  });\n  // Destructuring `toggle` and `toggleAll` from `providerValue`\n  const { toggle, toggleAll } = providerValue;\n  // highlight-end\n\n  return (\n    <div>\n      <div className="buttons">\n        <button\n          className="btn"\n          // Toggle between open and close by omitting the second parameter\n          // highlight-next-line\n          onClick={() => toggle(\'item-1\')}\n        >\n          Toogle the first item\n        </button>\n        <button\n          className="btn"\n          // Open rather than toggling\n          // highlight-next-line\n          onClick={() => toggle(\'item-3\', true)}\n        >\n          Open the last item\n        </button>\n        <button\n          className="btn"\n          // highlight-next-line\n          onClick={() => toggleAll(true)}\n        >\n          Open all items\n        </button>\n        <button\n          className="btn"\n          // highlight-next-line\n          onClick={() => toggleAll(false)}\n        >\n          Close all items\n        </button>\n        <button\n          className="btn"\n          // Omitting the boolean parameter means toggling\n          // highlight-next-line\n          onClick={() => toggleAll()}\n        >\n          Toggle all items\n        </button>\n      </div>\n\n      <ControlledAccordion\n        // Forward the `providerValue` directly to `ControlledAccordion`\n        // highlight-next-line\n        providerValue={providerValue}\n      >\n        <AccordionItem\n          header="What is Lorem Ipsum?"\n          // Set an explicit `itemKey`\n          // highlight-next-line\n          itemKey="item-1"\n        >\n          <p>\n            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed\n            do eiusmod tempor incididunt ut labore et dolore magna\n            aliqua.\n          </p>\n          <button\n            className="btn"\n            // It also works within the `AccordionItem` children\n            // highlight-next-line\n            onClick={() => toggle(\'item-3\')}\n          >\n            Toggle the last item\n          </button>\n        </AccordionItem>\n\n        <AccordionItem header="Where does it come from?">\n          Quisque eget luctus mi, vehicula mollis lorem. Proin fringilla\n          vel erat quis sodales. Nam ex enim, eleifend venenatis lectus\n          vitae, accumsan auctor mi.\n        </AccordionItem>\n\n        <AccordionItem\n          header="Why do we use it?"\n          // Set an explicit `itemKey`\n          // highlight-next-line\n          itemKey="item-3"\n        >\n          Suspendisse massa risus, pretium id interdum in, dictum sit\n          amet ante. Fusce vulputate purus sed tempus feugiat.\n        </AccordionItem>\n      </ControlledAccordion>\n    </div>\n  );\n}\n',c='import {\n  Accordion,\n  AccordionItem,\n  useAccordionState\n} from \'../accordion\';\n\nconst MyItem = () => {\n  // highlight-next-line\n  const { getItemState, toggle, toggleAll } = useAccordionState();\n\n  return (\n    <AccordionItem header="My custom accordion item" initialEntered>\n      <p>\n        {/* Accessing item state by providing an `itemKey` */}\n        {/* highlight-next-line */}\n        Next item expanded: {getItemState(\'next\').isEnter.toString()}\n      </p>\n\n      <div className="buttons">\n        {/* highlight-next-line */}\n        <button className="btn" onClick={() => toggle(\'next\')}>\n          Toggle next item\n        </button>\n\n        {/* highlight-next-line */}\n        <button className="btn" onClick={() => toggleAll(false)}>\n          Close all items\n        </button>\n      </div>\n    </AccordionItem>\n  );\n};\n\nexport default function Example() {\n  return (\n    <Accordion allowMultiple>\n      {/* highlight-next-line */}\n      <MyItem />\n\n      <AccordionItem\n        header="What is Lorem Ipsum?"\n        // highlight-next-line\n        itemKey="next"\n      >\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n        eiusmod tempor incididunt ut labore et dolore magna aliqua.\n      </AccordionItem>\n    </Accordion>\n  );\n}\n';var d=n(8695);function u(){const e=(0,d.p3)({allowMultiple:!0,transition:!0,transitionTimeout:250}),{toggle:t,toggleAll:n}=e;return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"buttons",children:[(0,i.jsx)("button",{className:"btn",onClick:()=>t("item-1"),children:"Toogle the first item"}),(0,i.jsx)("button",{className:"btn",onClick:()=>t("item-3",!0),children:"Open the last item"}),(0,i.jsx)("button",{className:"btn",onClick:()=>n(!0),children:"Open all items"}),(0,i.jsx)("button",{className:"btn",onClick:()=>n(!1),children:"Close all items"}),(0,i.jsx)("button",{className:"btn",onClick:()=>n(),children:"Toggle all items"})]}),(0,i.jsxs)(d.j_,{providerValue:e,children:[(0,i.jsxs)(d.As,{header:"What is Lorem Ipsum?",itemKey:"item-1",children:[(0,i.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}),(0,i.jsx)("button",{className:"btn",onClick:()=>t("item-3"),children:"Toggle the last item"})]}),(0,i.jsx)(d.As,{header:"Where does it come from?",children:"Quisque eget luctus mi, vehicula mollis lorem. Proin fringilla vel erat quis sodales. Nam ex enim, eleifend venenatis lectus vitae, accumsan auctor mi."}),(0,i.jsx)(d.As,{header:"Why do we use it?",itemKey:"item-3",children:"Suspendisse massa risus, pretium id interdum in, dictum sit amet ante. Fusce vulputate purus sed tempus feugiat."})]})]})}const m=()=>{const{getItemState:e,toggle:t,toggleAll:n}=(0,d.DU)();return(0,i.jsxs)(d.As,{header:"My custom accordion item",initialEntered:!0,children:[(0,i.jsxs)("p",{children:["Next item expanded: ",e("next").isEnter.toString()]}),(0,i.jsxs)("div",{className:"buttons",children:[(0,i.jsx)("button",{className:"btn",onClick:()=>t("next"),children:"Toggle next item"}),(0,i.jsx)("button",{className:"btn",onClick:()=>n(!1),children:"Close all items"})]})]})};function h(){return(0,i.jsxs)(d.nD,{allowMultiple:!0,children:[(0,i.jsx)(m,{}),(0,i.jsx)(d.As,{header:"What is Lorem Ipsum?",itemKey:"next",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."})]})}const g={sidebar_position:5},p="Controlling state",x={},f=[{value:"From above <code>Accordion</code>",id:"from-above-accordion",level:2},{value:"From underneath <code>Accordion</code>",id:"from-underneath-accordion",level:2}];function b(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",strong:"strong",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"controlling-state",children:"Controlling state"})}),"\n",(0,i.jsxs)(t.h2,{id:"from-above-accordion",children:["From above ",(0,i.jsx)(t.code,{children:"Accordion"})]}),"\n",(0,i.jsxs)(t.p,{children:["If you want to programmatically open or close accordion items from a component that is\nabove ",(0,i.jsx)(t.code,{children:"Accordion"})," in the React tree, you could use the ",(0,i.jsx)(t.code,{children:"ControlledAccordion"})," and\n",(0,i.jsx)(t.code,{children:"useAccordionProvider"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["The value returned from ",(0,i.jsx)(t.code,{children:"useAccordionProvider"})," contains a ",(0,i.jsx)(t.code,{children:"toggle"})," function which can be\nused to open or close any accordion items. This value should also be given to the\n",(0,i.jsx)(t.code,{children:"providerValue"})," prop of the ",(0,i.jsx)(t.code,{children:"ControlledAccordion"})," component."]}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"toggle"})," function accepts two parameters. The first parameter is the ",(0,i.jsx)(t.code,{children:"itemKey"})," prop of\nany accordion items to toggle. The second parameter specifies whether to open or close an\nitem using a ",(0,i.jsx)(t.code,{children:"boolean"})," value, or to toggle between the two states if the parameter is\nomitted."]}),"\n",(0,i.jsx)(u,{}),"\n",(0,i.jsx)(s.A,{language:"jsx",children:(0,a.R)(l)}),"\n",(0,i.jsxs)(t.admonition,{title:"NOTE",type:"caution",children:[(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"itemKey"})," prop of ",(0,i.jsx)(t.code,{children:"AccordionItem"})," is not required to be globally unique, but it should\nbe unique among its sibling ",(0,i.jsx)(t.code,{children:"AccordionItem"})," components."]}),(0,i.jsxs)(t.p,{children:["Also, you don't need to specify the ",(0,i.jsx)(t.code,{children:"itemKey"})," prop for an item if you don't want to\nprogrammatically toggle it."]})]}),"\n",(0,i.jsxs)(t.h2,{id:"from-underneath-accordion",children:["From underneath ",(0,i.jsx)(t.code,{children:"Accordion"})]}),"\n",(0,i.jsxs)(t.p,{children:["To programmatically open or close accordion items or access the state from a component\nthat is underneath ",(0,i.jsx)(t.code,{children:"Accordion"})," in the React tree, use the ",(0,i.jsx)(t.code,{children:"useAccordionState"})," hook."]}),"\n",(0,i.jsx)(h,{}),"\n",(0,i.jsx)(s.A,{language:"jsx",children:(0,a.R)(c)}),"\n",(0,i.jsx)(t.admonition,{type:"tip",children:(0,i.jsxs)(t.p,{children:["If you want to access and control state of the ",(0,i.jsx)(t.em,{children:(0,i.jsx)(t.strong,{children:"current"})})," item, there is a simpler way\nto achieve it using the ",(0,i.jsx)(t.a,{href:"./item-render-prop",children:"render prop pattern"}),"."]})})]})}function v(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(b,{...e})}):b(e)}},7210:(e,t,n)=>{n.d(t,{A:()=>a});var o,i,r=n(3696);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s.apply(null,arguments)}const a=e=>{let{title:t,titleId:n,...a}=e;return r.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"icon icon-tabler icon-tabler-chevron-down",viewBox:"0 0 24 24","aria-labelledby":n},a),t?r.createElement("title",{id:n},t):null,o||(o=r.createElement("path",{stroke:"none",d:"M0 0h24v24H0z"})),i||(i=r.createElement("path",{d:"m6 9 6 6 6-6"})))}},8695:(e,t,n)=>{n.d(t,{nD:()=>C,As:()=>I,j_:()=>k,p3:()=>i.p,DU:()=>N});var o=n(3696),i=n(786),r=n(959);const s=(e,t,n)=>(o,i)=>{const r=t?`${e}__${t}`:e;let s=r;n&&Object.keys(n).forEach((e=>{const t=n[e];t&&(s+=` ${r}--${!0===t?e:`${e}-${t}`}`)}));let a="function"==typeof o?o(i):o;return"string"==typeof a&&(a=a.trim(),a&&(s+=` ${a}`)),s},a=(e,t)=>{if(!t)return e;const n={...e};return Object.keys(t).forEach((o=>{const i=e[o],r=t[o];n[o]="function"==typeof r&&i?(...e)=>{i(...e),r(...e)}:r})),n};var l=n(630),c=n(7940),d=n(2540);const u=(0,o.forwardRef)((({providerValue:e,className:t,...n},o)=>{const{accordionProps:i}=(0,c.O)();return(0,d.jsx)(l.I,{value:e,children:(0,d.jsx)("div",{...a(i,n),ref:o,className:s(r.FP)(t)})})}));u.displayName="ControlledAccordion";const m=(0,o.forwardRef)((({allowMultiple:e,initialEntered:t,mountOnEnter:n,unmountOnExit:o,transition:r,transitionTimeout:s,onStateChange:a,...l},c)=>{const m=(0,i.p)({allowMultiple:e,initialEntered:t,mountOnEnter:n,unmountOnExit:o,transition:r,transitionTimeout:s,onStateChange:a});return(0,d.jsx)(u,{...l,ref:c,providerValue:m})}));m.displayName="Accordion";var h=n(7461),g=n(5325);function p(e,t){"function"==typeof e?e(t):e.current=t}function x(e,t){return(0,o.useMemo)((()=>e?t?n=>{p(e,n),p(t,n)}:e:t),[e,t])}var f=n(8626);const b=e=>{const t=(0,o.forwardRef)((({itemKey:t,initialEntered:n,...o},i)=>(0,d.jsx)(e,{forwardedRef:i,...o,...(0,f.q)({itemKey:t,initialEntered:n,disabled:o.disabled})})));return t.displayName="WithAccordionItem",t},v=(e,t)=>"function"==typeof e?e(t):e,j=(0,o.memo)((({forwardedRef:e,itemRef:t,state:n,toggle:o,className:i,disabled:l,header:c,headingTag:u="h3",headingProps:m,buttonProps:p,contentProps:f,panelProps:b,children:j,...A})=>{const y={state:n,toggle:o,disabled:l},{buttonProps:E,panelProps:w}=(0,h.r)(y),[N,C]=(0,g.a)(n),k=x(b?.ref,C),{status:I,isMounted:T,isEnter:P}=n;return(0,d.jsxs)("div",{...A,ref:x(e,t),className:s(r.FP,"item",{status:I,expanded:P})(i,n),children:[(0,d.jsx)(u,{...m,style:{margin:0,...m?.style},className:s(r.FP,"item-heading")(m?.className,n),children:(0,d.jsx)("button",{...a(E,p),type:"button",className:s(r.FP,"item-btn")(p?.className,n),children:v(c,y)})}),T&&(0,d.jsx)("div",{...f,style:{display:"exited"===I?"none":void 0,...N,...f?.style},className:s(r.FP,"item-content")(f?.className,n),children:(0,d.jsx)("div",{...a(w,b),ref:k,className:s(r.FP,"item-panel")(b?.className,n),children:v(j,y)})})]})}));j.displayName="AccordionItem";const A=b(j);var y=n(7210),E=n(2623),w=n(77);const N=()=>{const e=(0,w.D)();return{getItemState:(t,{initialEntered:n}={})=>(0,w.T)(e,t,n),toggle:e.toggle,toggleAll:e.toggleAll}},C=e=>(0,d.jsx)(m,{...e,className:E.A.accordion,transition:!0,transitionTimeout:250}),k=e=>(0,d.jsx)(u,{...e,className:E.A.accordion}),I=e=>(0,d.jsx)(A,{...e,header:t=>(0,d.jsxs)(d.Fragment,{children:["function"==typeof e.header?e.header(t):e.header,(0,d.jsx)(y.A,{className:E.A.chevron})]}),className:E.A.item,buttonProps:{className:e=>{let{isEnter:t}=e;return t?E.A.buttonExpanded:E.A.button}},contentProps:{className:E.A.content},panelProps:{className:E.A.panel}})},2375:(e,t,n)=>{n.d(t,{R:()=>o});const o=e=>e.replace("from '../accordion'","from '@szhsin/react-accordion'")},2623:(e,t,n)=>{n.d(t,{A:()=>o});const o={accordion:"accordion_nIGp",item:"item_YcP7",button:"button_lQEz",buttonExpanded:"buttonExpanded_Fmda button_lQEz",chevron:"chevron_Ys3M",content:"content_v0f5",panel:"panel_FAXb"}},630:(e,t,n)=>{n.d(t,{I:()=>r});var o=n(959),i=n(2540);const r=e=>(0,i.jsx)(o.C_.Provider,{...e})},7940:(e,t,n)=>{n.d(t,{O:()=>a});var o=n(959);const i=e=>{do{e=e.parentElement}while(e&&!e.hasAttribute(o.$f));return e},r=(e,t,n)=>e?t>0?t-1:n-1:(t+1)%n,s=(e,t)=>{const{activeElement:n}=document;if(!n||!n.hasAttribute(o.MP)||i(n)!==t.currentTarget)return;const s=t.currentTarget.querySelectorAll(`[${o.MP}]`),{length:a}=s;for(let o=0;o<a;o++)if(s[o]===n){let n=r(e,o,a);for(;i(s[o])!==i(s[n]);)n=r(e,n,a);o!==n&&(t.preventDefault(),s[n].focus());break}},a=()=>({accordionProps:{[o.$f]:"",onKeyDown:e=>"ArrowUp"===e.key?s(!0,e):"ArrowDown"===e.key&&s(!1,e)}})},77:(e,t,n)=>{n.d(t,{D:()=>s,T:()=>r});var o=n(3696),i=n(959);const r=(e,t,n)=>{const{stateMap:o,mountOnEnter:i,initialEntered:r}=e,s=null!=n?n:r;return o.get(t)||{status:s?"entered":i?"unmounted":"exited",isMounted:!i,isEnter:s,isResolved:!0}},s=()=>(0,o.useContext)(i.C_)},7461:(e,t,n)=>{n.d(t,{r:()=>a});var o=n(959),i=n(3696);let r=0;const s=i.useId||(()=>{const[e,t]=(0,i.useState)();return(0,i.useEffect)((()=>t(++r)),[]),e&&`${o.Gl}-${e}`}),a=({state:e,toggle:t,disabled:n})=>{const i=s(),r=i&&i+"-",a={id:i,"aria-controls":r,"aria-expanded":e.isEnter,onClick:t};n?a.disabled=!0:a[o.MP]="";return{buttonProps:a,panelProps:{id:r,"aria-labelledby":i,role:"region"}}}},8626:(e,t,n)=>{n.d(t,{q:()=>r});var o=n(3696),i=n(77);const r=({itemKey:e,initialEntered:t,disabled:n}={})=>{const r=(0,o.useRef)(null),s=(0,i.D)(),a=null!=e?e:r.current,l=(0,i.T)(s,a,t),{setItem:c,deleteItem:d,toggle:u}=s;return(0,o.useEffect)((()=>{if(n)return;const o=null!=e?e:r.current;return c(o,{initialEntered:t}),()=>{d(o)}}),[c,d,e,t,n]),{itemRef:r,state:l,toggle:(0,o.useCallback)((e=>u(a,e)),[u,a])}}},786:(e,t,n)=>{n.d(t,{p:()=>c});var o=n(3696);const i=["preEnter","entering","entered","preExit","exiting","exited","unmounted"],r=e=>e?6:5,s=(e,t,n,o,r,s)=>{clearTimeout(r);const a=(e=>({_s:e,status:i[e],isEnter:e<3,isMounted:6!==e,isResolved:2===e||e>4}))(t),l=new Map(o.current);l.set(e,a),n(l),o.current=l,s&&s({key:e,current:a})},a=({allowMultiple:e,enter:t=!0,exit:n=!0,preEnter:i,preExit:a,timeout:l,initialEntered:c,mountOnEnter:d,unmountOnExit:u,onStateChange:m}={})=>{const[h,g]=(0,o.useState)(new Map),p=(0,o.useRef)(h),x=(0,o.useRef)(new Map),[f,b]=(e=>"object"==typeof e?[e.enter,e.exit]:[e,e])(l),v=(0,o.useCallback)(((e,t)=>{const{initialEntered:n=c}=t||{},o=n?2:r(d);s(e,o,g,p),x.current.set(e,{})}),[c,d]),j=(0,o.useCallback)((e=>{const t=new Map(p.current);return!!t.delete(e)&&(g(t),p.current=t,x.current.delete(e),!0)}),[]),A=(0,o.useCallback)((e=>{const t=p.current.get(e);if(!t)return;const{timeoutId:n}=x.current.get(e),o=((e,t)=>{switch(e){case 1:case 0:return 2;case 4:case 3:return r(t)}})(t._s,u);o&&s(e,o,g,p,n,m)}),[m,u]),y=(0,o.useCallback)(((o,l)=>{const c=p.current.get(o);if(!c)return;const d=x.current.get(o),h=e=>{switch(s(o,e,g,p,d.timeoutId,m),e){case 1:f>=0&&(d.timeoutId=setTimeout((()=>A(o)),f));break;case 4:b>=0&&(d.timeoutId=setTimeout((()=>A(o)),b));break;case 0:case 3:d.timeoutId=((e,t)=>setTimeout((()=>{isNaN(document.body.offsetTop)||e(t+1)}),0))(h,e)}},v=c.isEnter;"boolean"!=typeof l&&(l=!v),l?v||(h(t?i?0:1:2),!e&&p.current.forEach(((e,t)=>t!==o&&y(t,!1)))):v&&h(n?a?3:4:r(u))}),[m,A,e,t,n,i,a,f,b,u]),E=(0,o.useCallback)((t=>{if(e||!1===t)for(const e of p.current.keys())y(e,t)}),[e,y]);return{stateMap:h,toggle:y,toggleAll:E,endTransition:A,setItem:v,deleteItem:j}},l=(e,t)=>!0===e||!(!e||!e[t]),c=({transition:e,transitionTimeout:t,...n}={})=>{const o=a({timeout:t,enter:l(e,"enter"),exit:l(e,"exit"),preEnter:l(e,"preEnter"),preExit:l(e,"preExit"),...n});return{mountOnEnter:!!n.mountOnEnter,initialEntered:!!n.initialEntered,...o}}},5325:(e,t,n)=>{n.d(t,{a:()=>r});var o=n(3696);const i="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?o.useLayoutEffect:o.useEffect,r=({status:e,isResolved:t})=>{const[n,r]=(0,o.useState)(),s=(0,o.useRef)(null);i((()=>{("preEnter"===e||"preExit"===e)&&r(s.current.getBoundingClientRect().height)}),[e]);return[{height:"preEnter"===e||"exiting"===e?0:"entering"===e||"preExit"===e?n:void 0,overflow:t?void 0:"hidden"},s]}},959:(e,t,n)=>{n.d(t,{$f:()=>s,C_:()=>l,FP:()=>i,Gl:()=>r,MP:()=>a});var o=n(3696);const i="szh-accordion",r="szh-adn",s=`data-${r}`,a=`data-${r}-btn`,l=(0,o.createContext)({})}}]);